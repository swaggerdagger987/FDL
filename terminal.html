<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Terminal | Fourth Down Labs</title>
    <meta
      name="description"
      content="Use the Fourth Down Labs fantasy football terminal: live trade analyzer, Sleeper sync, and adversarial leaguemate intelligence."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=IBM+Plex+Mono:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="ambient-backdrop" aria-hidden="true"></div>
    <header class="site-header">
      <a class="brand" href="./index.html">
        <span class="brand-dot"></span>
        Fourth Down Labs
      </a>
      <nav class="main-nav" aria-label="Primary">
        <a class="nav-link" href="./index.html">Home</a>
        <a class="nav-link" href="./mission.html">Mission</a>
        <a class="nav-link" href="./modules.html">Modules</a>
        <a class="nav-link" href="./screener.html">Screener</a>
        <a class="nav-link" href="./pricing.html">Pricing</a>
        <a class="nav-link" href="./roadmap.html">Roadmap</a>
      </nav>
      <a class="nav-cta active" href="./terminal.html">Terminal</a>
    </header>

    <header class="topbar fade-in">
      <div>
        <p class="eyebrow">LIVE TERMINAL</p>
        <h1>Fantasy Football Trade + Opponent Intel</h1>
        <p class="subhead">
          Run valuation, lineup impact, and adversarial profiling in one workflow.
        </p>
      </div>
      <div class="usage-badge">
        <span>Free analyses remaining today</span>
        <strong id="free-remaining">3</strong>
      </div>
    </header>

    <main class="layout">
      <section class="panel fade-in">
        <h2>League + Terminal Controls</h2>
        <div class="control-grid">
          <label>
            Scoring Format
            <select id="scoring-format">
              <option value="std">Standard</option>
              <option value="ppr" selected>PPR</option>
              <option value="half">Half-PPR (Pro)</option>
            </select>
          </label>
          <label>
            My Team Side
            <select id="user-side">
              <option value="A">Team A</option>
              <option value="B">Team B</option>
            </select>
          </label>
          <label class="toggle-wrap">
            <span>Enable Pro Preview</span>
            <input id="pro-mode-toggle" type="checkbox" />
          </label>
          <label>
            Sleeper Username
            <input id="sleeper-username" placeholder="e.g., soham123" />
          </label>
          <label>
            NFL Season
            <input id="sleeper-season" type="number" min="2017" max="2100" />
          </label>
          <button id="load-leagues-btn" class="secondary-btn">Load Leagues</button>
          <label>
            League
            <select id="league-select"></select>
          </label>
          <button id="sync-league-btn" class="secondary-btn">Sync League</button>
          <button id="refresh-data-btn" class="secondary-btn">Refresh Live DB</button>
        </div>
        <p id="sync-status" class="hint"></p>
        <p id="db-status" class="hint">Database status: checking connection...</p>
      </section>

      <section class="trade-builder fade-in">
        <article class="panel side-card">
          <h2>Team A Gives</h2>
          <div class="input-row">
            <input id="team-a-input" list="player-options" placeholder="Add player (e.g., Breece Hall)" />
            <button id="add-team-a" class="secondary-btn">Add</button>
          </div>
          <ul id="team-a-list" class="chip-list"></ul>
        </article>

        <article class="panel side-card">
          <h2>Team B Gives</h2>
          <div class="input-row">
            <input id="team-b-input" list="player-options" placeholder="Add player (e.g., Ja'Marr Chase)" />
            <button id="add-team-b" class="secondary-btn">Add</button>
          </div>
          <ul id="team-b-list" class="chip-list"></ul>
        </article>
      </section>

      <section class="panel action-panel fade-in">
        <button id="analyze-btn" class="primary-btn">Analyze Trade</button>
        <p id="analysis-status" class="status" data-level="info">Ready for analysis.</p>
      </section>

      <section class="panel fade-in">
        <h2>Adversarial Intelligence</h2>
        <p class="hint">
          Build multi-season leaguemate profiles from Sleeper transactions (FAAB, trades, draft-pick movement, roster churn).
        </p>
        <div class="control-grid">
          <label>
            Seasons to Analyze
            <select id="ai-lookback">
              <option value="1">1 season</option>
              <option value="2" selected>2 seasons</option>
              <option value="3">3 seasons</option>
              <option value="4">4 seasons</option>
            </select>
          </label>
          <button id="build-intel-btn" class="secondary-btn">Build Opponent Profiles</button>
        </div>
        <p id="intel-status" class="status" data-level="info">Sync a live Sleeper league first, then run profile analysis.</p>
      </section>

      <section id="intel-section" class="results hidden">
        <article class="panel result-card">
          <h2>League Intelligence Snapshot</h2>
          <div id="intel-kpis" class="kpi-grid"></div>
        </article>
        <article class="panel result-card">
          <h2>Leaguemate Aggression Index</h2>
          <div id="intel-bars" class="intel-bars"></div>
        </article>
        <article class="panel result-card">
          <h2>Opponent Profiles</h2>
          <div id="intel-profiles" class="profile-list"></div>
        </article>
      </section>

      <section id="results-section" class="results hidden">
        <article class="panel result-card">
          <h2>Free Tier Output</h2>
          <div class="value-bar">
            <div id="value-bar-inner"></div>
          </div>
          <div id="free-summary"></div>
          <table>
            <thead>
              <tr>
                <th>Player</th>
                <th>Pos</th>
                <th>Proj</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody id="projection-rows"></tbody>
          </table>
        </article>

        <article id="paywall-card" class="panel paywall hidden">
          <h2>Unlock Full Portfolio Analysis</h2>
          <p id="paywall-text"></p>
          <p>
            Pro includes accretion/dilution, volatility labels, bye-week conflict scan, roster fit score, and full verdict narrative.
          </p>
        </article>

        <section id="pro-report" class="pro-grid hidden">
          <article class="panel result-card">
            <h3>Value Summary</h3>
            <div id="pro-value-summary"></div>
          </article>
          <article class="panel result-card">
            <h3>Accretion / Dilution</h3>
            <div id="pro-accretion"></div>
          </article>
          <article class="panel result-card">
            <h3>Volatility Analysis</h3>
            <div id="pro-volatility"></div>
          </article>
          <article class="panel result-card">
            <h3>Bye Week Impact</h3>
            <div id="pro-bye-impact"></div>
          </article>
          <article class="panel result-card">
            <h3>Roster Fit Score</h3>
            <div id="pro-roster-fit"></div>
          </article>
          <article class="panel verdict-card">
            <p class="verdict-label">Verdict</p>
            <p id="verdict-grade" class="grade">B</p>
            <p id="verdict-summary"></p>
            <p id="verdict-confidence" class="confidence"></p>
          </article>
        </section>

        <article class="panel feedback-panel">
          <h2>Beta Feedback Capture</h2>
          <p>Save tester notes locally, then export a JSON feedback bundle.</p>
          <form id="feedback-form">
            <label>
              Tester Email (optional)
              <input id="feedback-email" type="email" placeholder="beta_tester@email.com" />
            </label>
            <label>
              Feedback Notes
              <textarea id="feedback-notes" rows="4" placeholder="What was confusing? What did you trust or not trust?"></textarea>
            </label>
            <div class="feedback-actions">
              <button class="secondary-btn" type="submit">Save Feedback</button>
              <button id="download-feedback-btn" class="secondary-btn" type="button">Export Feedback JSON</button>
            </div>
          </form>
          <p id="feedback-message" class="hint"></p>
        </article>
      </section>
    </main>

    <datalist id="player-options"></datalist>
    <script type="module" src="./app.js"></script>
  </body>
</html>
